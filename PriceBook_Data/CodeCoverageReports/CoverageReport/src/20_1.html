<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>c:\dev\PriceBook\PriceBook_Data\Store.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;
using Microsoft.EntityFrameworkCore;

namespace PriceBook_Data
{
    public class Store
    {
        public int Id { get; set; }

        [MaxLength(50)]
        public string Name { get; set; }

        [MaxLength(50)]
        public string Address { get; set; }

        [MaxLength(50)]
        public string City { get; set; }

        [MaxLength(10)]
        public string State { get; set; }

        [NotMapped]
        public bool IsAttached { get; internal set; }

        public Store()
        {

        }

        public Store(int id)
        {
            using (ApplicationContext context = new ApplicationContext())
            {
                Store store = context.Store.FirstOrDefault(i =&gt; i.Id == id);
                if (store == null) return;
                CurrentObjectValues(store);
            }
        }

        public Store(string name)
        {
            using (ApplicationContext context = new ApplicationContext())
            {
                Store store = context.Store.FirstOrDefault(n =&gt; n.Name == name);
                CurrentObjectValues(store);
            }
        }

        public void Add()
        {
            using (ApplicationContext context = new ApplicationContext())
            {
                context.Store.Add(this);
                context.SaveChanges();
            }
        }

        public void SaveUpdate()
        {

            using (ApplicationContext context = new ApplicationContext())
            {
                context.Store.Attach(this);
                context.Entry(this).State = EntityState.Modified;
                context.SaveChanges();
            }

        }

        public void Delete()
        {
            using (ApplicationContext context = new ApplicationContext())
            {
                context.Store.Attach(this);
                context.Store.Remove(this);
                context.SaveChanges();
            }
        }

        public bool Equals(Store store)
        {
            if (this.Id != store.Id) return false;
            if (this.Name != store.Name) return false;
            if (this.Address != store.Address) return false;
            if (this.City != store.City) return false;
            if (this.State != store.State) return false;
            return true;
        }

        public override string ToString() =&gt; Name + &quot; &quot; + City + IsAttached;

        private void CurrentObjectValues(Store store)
        {
            this.Id = store.Id;
            this.Name = store.Name;
            this.Address = store.Address;
            this.City = store.City;
            this.State = store.State;
            this.IsAttached = true;
        }

        
    }


    
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[9,25,9,29,1],[9,30,9,34,1],[12,30,12,34,1],[12,35,12,39,1],[15,33,15,37,1],[15,38,15,42,1],[18,30,18,34,1],[18,35,18,39,1],[21,31,21,35,1],[21,36,21,40,1],[24,34,24,38,1],[24,39,24,52,1],[26,9,26,23,1],[27,9,27,10,1],[29,9,29,10,1],[31,9,31,29,1],[32,9,32,10,1],[33,20,33,73,1],[34,13,34,14,1],[35,17,35,77,1],[36,17,36,35,1],[36,36,36,43,1],[37,17,37,44,1],[38,13,38,14,1],[39,9,39,10,1],[41,9,41,34,1],[42,9,42,10,1],[43,20,43,73,1],[44,13,44,14,1],[45,17,45,81,1],[46,17,46,44,1],[47,13,47,14,1],[48,9,48,10,1],[51,9,51,10,1],[52,20,52,73,1],[53,13,53,14,1],[54,17,54,41,1],[55,17,55,39,1],[56,13,56,14,1],[57,9,57,10,1],[60,9,60,10,1],[62,20,62,73,1],[63,13,63,14,1],[64,17,64,44,1],[65,17,65,66,1],[66,17,66,39,1],[67,13,67,14,1],[69,9,69,10,1],[72,9,72,10,1],[73,20,73,73,1],[74,13,74,14,1],[75,17,75,44,1],[76,17,76,44,1],[77,17,77,39,1],[78,13,78,14,1],[79,9,79,10,1],[82,9,82,10,1],[83,13,83,37,1],[83,38,83,51,1],[84,13,84,41,1],[84,42,84,55,1],[85,13,85,47,1],[85,48,85,61,1],[86,13,86,41,1],[86,42,86,55,1],[87,13,87,43,1],[87,44,87,57,1],[88,13,88,25,1],[89,9,89,10,1],[91,46,91,76,1],[94,9,94,10,1],[95,13,95,32,1],[96,13,96,36,1],[97,13,97,42,1],[98,13,98,36,1],[99,13,99,38,1],[100,13,100,36,1],[101,9,101,10,1]]);
    </script>
  </body>
</html>