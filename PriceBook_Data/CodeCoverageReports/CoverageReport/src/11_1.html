<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>c:\dev\PriceBook\PriceBook_Data\Categories.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Collections;
using Microsoft.EntityFrameworkCore;

namespace PriceBook_Data
{
    public class Categories : IEnumerable&lt;Category&gt;
    {

        private readonly List&lt;Category&gt; _cats;


        public Categories(bool includeItems = false)
        {
            using (ApplicationContext context = new ApplicationContext())
            {

                if (includeItems)
                {
                    _cats = context.Category.Include(c =&gt; c.Items).ToList();
                }
                else
                {
                    _cats = context.Category.ToList();
                }
                
            }

            foreach (var cat in _cats)
            {
                cat.IsAttached = true;
            }
        }


        public int Count =&gt; _cats.Count;

        public Category this[int i] =&gt; _cats[i];

        public IEnumerator&lt;Category&gt; GetEnumerator()
        {
            return _cats.GetEnumerator();
        }

        [System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverageAttribute]
        IEnumerator IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        }

        public List&lt;Category&gt; ToList()
        {
            return _cats.ToList();
        }

        public Category[] ToArray()
        {
            return _cats.ToArray();
        }


    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[12,9,12,53,1],[13,9,13,10,1],[14,20,14,73,1],[15,13,15,14,1],[17,17,17,34,1],[18,17,18,18,1],[19,21,19,77,1],[20,17,20,18,1],[22,17,22,18,1],[23,21,23,55,1],[24,17,24,18,1],[26,13,26,14,1],[28,13,28,20,1],[28,22,28,29,1],[28,30,28,32,1],[28,33,28,38,1],[29,13,29,14,1],[30,17,30,39,1],[31,13,31,14,1],[32,9,32,10,1],[35,29,35,40,1],[37,40,37,48,1],[40,9,40,10,1],[41,13,41,42,1],[42,9,42,10,1],[51,9,51,10,1],[52,13,52,35,1],[53,9,53,10,1],[56,9,56,10,1],[57,13,57,36,1],[58,9,58,10,1]]);
    </script>
  </body>
</html>