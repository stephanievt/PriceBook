<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>c:\dev\PriceBook\PriceBook_Data\UnitType.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;
using Microsoft.EntityFrameworkCore;

namespace PriceBook_Data
{
    public class UnitType
    {
        public int Id { get; set; }

        [MaxLength(50)]
        public string Name { get; set; }

        // Getters and setter definitions need&#39;t be covered by dotcover
        [System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverageAttribute]
        public List&lt;Unit&gt; Units { get; set; }

        [NotMapped]
        public bool IsAttached { get; internal set; }

        public UnitType()
        {
        }

        public UnitType(string name)
        {
            using (ApplicationContext context = new ApplicationContext())
            {
                UnitType ut = context.UnitType.FirstOrDefault(t =&gt; t.Name == name);
                if (ut == null) return;
                this.Name = ut.Name;
                this.Id = ut.Id;
                this.IsAttached = true;

            }
        }

        public UnitType(int id)
        {
            using (ApplicationContext context = new ApplicationContext())
            {
                UnitType ut = context.UnitType.FirstOrDefault(t =&gt; t.Id == id);
                if (ut == null) return;
                this.Name = ut.Name;
                this.Id = ut.Id;
                this.IsAttached = true;

            }
        }

        public void Add()
        {
            using (ApplicationContext context = new ApplicationContext())
            {
                context.UnitType.Add(this);
                context.SaveChanges();
            }
        }

        public void SaveUpdate()
        {

            using (ApplicationContext context = new ApplicationContext())
            {
                context.UnitType.Attach(this);
                context.Entry(this).State = EntityState.Modified;
                context.SaveChanges();
            }

        }

        public void Delete()
        {
            using (ApplicationContext context = new ApplicationContext())
            {
                context.UnitType.Attach(this);
                context.UnitType.Remove(this);
                context.SaveChanges();
            }
        }

        public bool Equals(UnitType compare)
        {
            if (this.Id != compare.Id) return false;
            if (this.Name != compare.Name) return false;
            return true;
        }

        public override string ToString()
        {
            
            return Name + &quot; &quot; + IsAttached.ToString();
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[9,25,9,29,1],[9,30,9,34,1],[12,30,12,34,1],[12,35,12,39,1],[19,34,19,38,1],[19,39,19,52,1],[21,9,21,26,1],[22,9,22,10,1],[23,9,23,10,1],[25,9,25,37,1],[26,9,26,10,1],[27,20,27,73,1],[28,13,28,14,1],[29,17,29,84,1],[30,17,30,32,1],[30,33,30,40,1],[31,17,31,37,1],[32,17,32,33,1],[33,17,33,40,1],[35,13,35,14,1],[36,9,36,10,1],[38,9,38,32,1],[39,9,39,10,1],[40,20,40,73,1],[41,13,41,14,1],[42,17,42,80,1],[43,17,43,32,1],[43,33,43,40,1],[44,17,44,37,1],[45,17,45,33,1],[46,17,46,40,1],[48,13,48,14,1],[49,9,49,10,1],[52,9,52,10,1],[53,20,53,73,1],[54,13,54,14,1],[55,17,55,44,1],[56,17,56,39,1],[57,13,57,14,1],[58,9,58,10,1],[61,9,61,10,1],[63,20,63,73,1],[64,13,64,14,1],[65,17,65,47,1],[66,17,66,66,1],[67,17,67,39,1],[68,13,68,14,1],[70,9,70,10,1],[73,9,73,10,1],[74,20,74,73,1],[75,13,75,14,1],[76,17,76,47,1],[77,17,77,47,1],[78,17,78,39,1],[79,13,79,14,1],[80,9,80,10,1],[83,9,83,10,1],[84,13,84,39,1],[84,40,84,53,1],[85,13,85,43,1],[85,44,85,57,1],[86,13,86,25,1],[87,9,87,10,1],[90,9,90,10,1],[92,13,92,55,1],[93,9,93,10,1]]);
    </script>
  </body>
</html>