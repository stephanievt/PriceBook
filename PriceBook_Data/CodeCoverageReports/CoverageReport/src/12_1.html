<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>c:\dev\PriceBook\PriceBook_Data\Category.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;
using System.Text.Json.Serialization;
using Microsoft.EntityFrameworkCore;
// ReSharper disable EntityFramework.NPlusOne.IncompleteDataQuery
// ReSharper disable EntityFramework.NPlusOne.IncompleteDataUsage

#pragma warning disable CS0659 // Type overrides Object.Equals(object o) but does not override Object.GetHashCode()

namespace PriceBook_Data
{
    
    public class Category
    {

        [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public int Id { get; set; }

        [MaxLength(70)]
        public string Name { get; set; }

        [JsonIgnore]
        [System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverage]
        public List&lt;Item&gt; Items { get; set; }

        
        [NotMapped]
        [System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverage]
        internal bool IsAttached { get; set; }

        public Category()
        {

        }

        public Category(int id)
        {
            using (ApplicationContext context = new ApplicationContext())
            {
                var cat = context.Category
                    .FirstOrDefault(i =&gt; i.Id == id);
                if (cat == null) throw new ApplicationException(&quot;No Category with that Id Exists.&quot;);
                this.Id = cat.Id;
                this.Name = cat.Name;
                this.IsAttached = true;
            }
        }

        

        public void Add()
        {
            using (ApplicationContext context = new ApplicationContext())
            {
                context.Category.Add(this);
                context.SaveChanges();
            }
        }

        public void Delete()
        {
            using (ApplicationContext context = new ApplicationContext())
            {
                context.Category.Attach(this);
                context.Category.Remove(this);
                context.SaveChanges();
            }

        }

        public void SaveUpdate(bool modified = false)
        {

            using (ApplicationContext context = new ApplicationContext())
            {
                context.Category.Attach(this);
                if (modified) context.Entry(this).State = EntityState.Modified;
                context.SaveChanges();
            }

        }

        public bool Equals(Category compare)
        {
            if (this.Id != compare.Id) return false;
            if (this.Name != compare.Name) return false;
            return true;
        }

    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[17,25,17,29,1],[17,30,17,34,1],[20,30,20,34,1],[20,35,20,39,1],[31,9,31,26,1],[32,9,32,10,1],[34,9,34,10,1],[36,9,36,32,1],[37,9,37,10,1],[38,20,38,73,1],[39,13,39,14,1],[40,17,41,54,1],[42,17,42,33,1],[42,34,42,101,1],[43,17,43,34,1],[44,17,44,38,1],[45,17,45,40,1],[46,13,46,14,1],[47,9,47,10,1],[52,9,52,10,1],[53,20,53,73,1],[54,13,54,14,1],[55,17,55,44,1],[56,17,56,39,1],[57,13,57,14,1],[58,9,58,10,1],[61,9,61,10,1],[62,20,62,73,1],[63,13,63,14,1],[64,17,64,47,1],[65,17,65,47,1],[66,17,66,39,1],[67,13,67,14,1],[69,9,69,10,1],[72,9,72,10,1],[74,20,74,73,1],[75,13,75,14,1],[76,17,76,47,1],[77,17,77,30,1],[77,31,77,80,1],[78,17,78,39,1],[79,13,79,14,1],[81,9,81,10,1],[84,9,84,10,1],[85,13,85,39,1],[85,40,85,53,1],[86,13,86,43,1],[86,44,86,57,1],[87,13,87,25,1],[88,9,88,10,1]]);
    </script>
  </body>
</html>