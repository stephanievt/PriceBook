<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>c:\dev\PriceBook\PriceBook_Data\ItemCostRecord.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace PriceBook_Data
{
    public class ItemCostRecord
    {
        public int Id { get; set; }

        public int ItemId { get; set; }

        public int StoreId { get; set; }

        public int UnitId { get; set; }

        public DateTime BuyDate { get; set; } = DateTime.Now;

        [System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverage]
        public Store Store { get; set; }

        [System.Diagnostics.CodeAnalysis.ExcludeFromCodeCoverage]
        public Unit Unit { get; set; }

        public decimal Price { get; set; }

        [MaxLength(20)]
        public string Upc { get; set; }

        [MaxLength(100)]
        public string Brand { get; set; }

        [MaxLength]
        // ReSharper disable once EntityFramework.ModelValidation.UnlimitedStringLength
        public string Notes { get; set; }

        [NotMapped]
        public bool Found { get; private set; }

        public ItemCostRecord()
        {

        }

        public ItemCostRecord(int id)
        {
            ApplicationContext context = new ApplicationContext();
            ItemCostRecord cr;

            cr = context.ItemCostRecord.FirstOrDefault(i =&gt; i.Id == id);


            if (cr == null)
            {
                Found = false;
            }
            else
            {
                this.Id = cr.Id;
                this.Brand = cr.Brand;
                this.BuyDate = cr.BuyDate;
                this.ItemId = cr.ItemId;
                this.Notes = cr.Notes;
                this.Price = cr.Price;
                this.StoreId = cr.StoreId;
                this.UnitId = cr.UnitId;
                this.Upc = cr.Upc;
                Found = true;
            }

        }
        

        public void Add()
        {
            using (ApplicationContext context = new ApplicationContext())
            {
                context.ItemCostRecord.Add(this);
                context.SaveChanges();
            }
        }

        public void SaveUpdate()
        {

            using (ApplicationContext context = new ApplicationContext())
            {
                context.ItemCostRecord.Attach(this);
                context.SaveChanges();
            }
            
        }

        public void Delete()
        {
            using (ApplicationContext context = new ApplicationContext())
            {
                context.ItemCostRecord.Attach(this);
                context.ItemCostRecord.Remove(this);
                context.SaveChanges();
            }
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[8,25,8,29,1],[8,30,8,34,1],[10,29,10,33,1],[10,34,10,38,1],[12,30,12,34,1],[12,35,12,39,1],[14,29,14,33,1],[14,34,14,38,1],[16,35,16,39,1],[16,40,16,44,1],[16,49,16,61,1],[16,49,16,61,1],[24,32,24,36,1],[24,37,24,41,1],[27,29,27,33,1],[27,34,27,38,1],[30,31,30,35,1],[30,36,30,40,1],[34,31,34,35,1],[34,36,34,40,1],[37,29,37,33,1],[37,34,37,46,1],[39,9,39,32,1],[40,9,40,10,1],[42,9,42,10,1],[44,9,44,38,1],[45,9,45,10,1],[46,13,46,67,1],[49,13,49,73,1],[52,13,52,28,1],[53,13,53,14,1],[54,17,54,31,1],[55,13,55,14,1],[57,13,57,14,1],[58,17,58,33,1],[59,17,59,39,1],[60,17,60,43,1],[61,17,61,41,1],[62,17,62,39,1],[63,17,63,39,1],[64,17,64,43,1],[65,17,65,41,1],[66,17,66,35,1],[67,17,67,30,1],[68,13,68,14,1],[70,9,70,10,1],[74,9,74,10,1],[75,20,75,73,1],[76,13,76,14,1],[77,17,77,50,1],[78,17,78,39,1],[79,13,79,14,1],[80,9,80,10,1],[83,9,83,10,1],[85,20,85,73,1],[86,13,86,14,1],[87,17,87,53,1],[88,17,88,39,1],[89,13,89,14,1],[91,9,91,10,1],[94,9,94,10,1],[95,20,95,73,1],[96,13,96,14,1],[97,17,97,53,1],[98,17,98,53,1],[99,17,99,39,1],[100,13,100,14,1],[101,9,101,10,1]]);
    </script>
  </body>
</html>